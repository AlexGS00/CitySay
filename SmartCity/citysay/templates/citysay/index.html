{% extends "citysay/layout.html" %}
{% load static %}
{% block title %}Home{% endblock title %}

{% block body %}
{% if user.is_authenticated %}
<div class="main container">
    <div class="section-title text-center my-4">
        CityVoice
    </div>

    <div class="content d-flex flex-column gap-4" style="min-height: 60vh;">
        
        <!-- Button above polls -->
        <div class="d-flex justify-content-center">
            <a href={% url "create_sesization" %}><button class="custom-btn register" style="font-size: 22px" >Creează sesizare</button></a>
        </div>

        <!-- Polls Section -->
        <div class="sesizations-list">
            <div class="fw-bold mb-3 main-text">Cele mai noi sondaje:</div>
            {% for poll in polls %}
                <a href="/poll/{{ poll.id }}" class="text-decoration-none text-dark">
                    <div class="poll-card mb-3 p-3 shadow-sm rounded bg-light">
                        <div class="poll-heading mb-2">
                            <div class="poll-card-title fw-semibold">{{ poll.title }}</div>
                            <div class="poll-card-inst text-muted">De către: {{ poll.institution.name }}</div>
                        </div>
                        <div class="poll-card-text">{{ poll.description }}</div>
                    </div>
                </a>
            {% endfor %}
        </div>
    </div>
</div>

{% else %}

<div class="container my-5">
    <h1 class="mb-4 section-title">Bine ai venit la CityVoice!</h1>
    <div class="home-description">
        <p>
            CityVoice este o aplicație modernă care îți oferă o legătură directă cu instituțiile publice din orașul tău. Creată pentru a reduce birocrația și pentru a încuraja implicarea 
            civică, platforma îți permite să fii informat, să îți exprimi opinia și să contribui activ la deciziile care afectează comunitatea.
        </p>
        <ul>
            <li>Votează în sondaje oficiale – Spune-ți părerea despre proiecte locale și priorități bugetare.</li>
            <li>Trimite sesizări rapid – Semnalează probleme din oraș (ex: iluminat public, gropi, curățenie) direct către instituțiile responsabile.</li>
            <li>Urmărește răspunsurile – Vezi statusul sesizărilor tale (în așteptare / luată la cunoștință) și activitatea autorităților.</li>
            <li>Platformă centralizată – Totul într-un singur loc, fără dosare și fără drumuri inutile.</li>
        </ul>

        <div class="mini-header">Instituțiile disponibile pe aplicație:</div>
        <div class="img-section d-flex flex-wrap justify-content-center gap-3">
            <div class="institution-card">
                <img src="{% static 'images/peda.png' %}" alt="Peda" class="institution-img">
                <div class="institution-name">Colegiul Național Pedagogic "Regina Maria" Deva</div>
            </div>
            <div class="institution-card">
                <img src="{% static 'images/primarie.png' %}" alt="Primăria" class="institution-img">
                <div class="institution-name">Primăria Municipiului Deva</div>
            </div>
            <div class="institution-card">
                <img src="{% static 'images/consiliu.png' %}" alt="cjh" class="institution-img">
                <div class="institution-name">Consiliul Județean Hunedoara</div>
            </div>
        </div>
        <div class="img-section d-flex flex-wrap justify-content-center gap-3 mb-4">
            <div class="institution-card">
                <img src="{% static 'images/spital.png' %}" alt="spital" class="institution-img">
                <div class="institution-name">Spitalul Județean de Urgență Deva</div>
            </div>
            <div class="institution-card">
                <img src="{% static 'images/isj.png' %}" alt="ish" class="institution-img">
                <div class="institution-name">Inspectoratul Școlar Județean Hunedoara</div>
            </div>
            <div class="institution-card">
                <img src="{% static 'images/politia.jpg' %}" alt="politia" class="institution-img">
                <div class="institution-name">Poliția Municipiului Deva</div>
            </div>
        </div>
    </div>
    <div class="d-flex justify-content-center home-buttons">
        <a href="{% url 'login' %}" class="home-button">Conectează-te</a>
        <a href="{% url 'register' %}" class="home-button">Înregistrează-te</a>
    </div>
    <div></div>


{% endif %}
{% endblock body %}
